/*! SpringRoll 1.0.3 */
!function(){"use strict";!function(){function a(a){var b="color:"+a;return function(a){if(arguments.length>1){var e=c.call(arguments);if("object"==typeof e[0])e.unshift(b),e.unshift("%c%o");else{var f="%c"+e[0];e[0]=b,e.unshift(f)}return d.log.apply(d,e)}return"object"==typeof arguments[0]?d.log("%c%o",b,a):d.log("%c"+a,b)}}var b=include("springroll.Enum"),c=Array.prototype.slice,d={},e=void 0!==window.console,f=void 0===document.documentMode,g="DEBUG";if(e)try{console.assert.apply(console,[!0,"IE9 test"])}catch(A){for(var h,i=Function.prototype.bind,j=["log","debug","warn","info","error","assert","dir","trace","group","groupCollapsed","groupEnd"],k=0;k<j.length;k++)h=j[k],console[h]&&(console[h]=i.call(console[h],console))}var l=d.Levels=new b("GENERAL",g,"INFO","WARN","ERROR");d.minLogLevel=l.GENERAL,d.enabled=!0,d.output=null;var m=!1,n=null,o=null,p=null,q={},r=["log","debug","warn","info","error","assert","dir","trace","group","groupCollapsed","groupEnd","_remoteLog","globalErrorHandler","navy","blue","aqua","teal","olive","green","lime","yellow","orange","red","pink","purple","maroon","silver","gray"],s=/(:\d+)+/;d.connect=function(a){if(!("WebSocket"in window||"MozWebSocket"in window))return!1;window.WebSocket=WebSocket||MozWebSocket;try{n=new WebSocket("ws://"+a+":1026"),n.onopen=t,n.onclose=u,n.onerror=u,p=[],m=!0}catch(A){return!1}return!0},d.disconnect=function(){m&&(n.close(),u())};var t=function(){window.onerror=q.globalErrorHandler,o={level:"session",message:"",stack:null,time:0},n.send(JSON.stringify(o));for(var a=0,b=p.length;a<b;++a)n.send(JSON.stringify(p[a]));p=null};q.globalErrorHandler=function(a,b,c,e,f){return d._remoteLog(a,l.ERROR,f?f.stack:null),!1};var u=function(){window.onerror=null,m=!1,n.onopen=null,n.onmessage=null,n.onclose=null,n.onerror=null,n=null,o=null,p=null},v=function(a,b){d.output&&(d.output.innerHTML+='<div class="'+a+'">'+b+"</div>")};d._remoteLog=function(a,b,e){b=b||l.GENERAL,Array.isArray(a)||(a=[a]),a=c.call(a);var f,g;for(f=0,g=a.length;f<g;f++)if("object"==typeof a[f])try{a[f]=x(a[f],3)}catch(y){a[f]=String(a[f])}e||(e=(new Error).stack),e=e?e.split("\n"):[];var h,i,j,k,m,q,t=-1,u=!0;for(f=0,g=e.length;f<g;++f){var v=e[f].trim();if(v)if("Error"==v||v.indexOf("Error:")>-1)t=f;else{if(v.indexOf("@")>-1){if(h=v.indexOf("@"),i=v.substring(0,h),m=-1!=i.indexOf(".")?i.substring(i.lastIndexOf(".")+1):i,u&&-1!=r.indexOf(m)){t=f;continue}j=v.substring(h+1)}else{if(h=v.indexOf("("),i=v.substring(3,h-1),m=-1!=i.indexOf(".")?i.substring(i.lastIndexOf(".")+1):i,u&&-1!=r.indexOf(m)){t=f;continue}j=v.substring(h+1,v.length-2)}q=s.exec(j),q?(j=j.substring(0,q.index),k=q[0].substring(1),u=!1,e[f]={function:i||"<anonymous>",file:j,lineLocation:k}):e[f]={function:"",file:"",lineLocation:""}}else if(f==g-1){e.pop();break}}if(t>=0&&(e=e.slice(t+1)),p)p.push({message:a,level:b.name,stack:e,time:Date.now()});else{o.level=b.name,o.message=a,o.stack=e,o.time=Date.now();var w;try{w=JSON.stringify(o)}catch(y){o.message=["[circular object]"],w=JSON.stringify(o)}n.send(w)}return d};var w=[],x=function(a,b,c){if(Array.isArray(a))return a;c=c||0,0===c&&(w.length=0),w.push(a);var d={};for(var e in a){var f=a[e];if(f instanceof Window||f instanceof Document||f instanceof HTMLElement||"document"==e||"window"==e||"ownerDocument"==e||"view"==e||"target"==e||"currentTarget"==e||"originalTarget"==e||"explicitOriginalTarget"==e||"rangeParent"==e||"srcElement"==e||"relatedTarget"==e||"fromElement"==e||"toElement"==e){if(f instanceof HTMLElement){var g;g="<"+f.tagName,f.id&&(g+=" id='"+f.id+"'"),f.className&&(g+=" class='"+f.className+"'"),d[e]=g+" />"}}else switch(typeof f){case"object":d[e]=c>b||w.indexOf(f)>-1?String(f):x(f,b,c+1);break;case"function":d[e]="[function]";break;case"string":case"number":case"boolean":case"bool":default:d[e]=f}}return d};d.log=function(a){return d.enabled?(m?d._remoteLog(Array.prototype.slice.call(arguments)):d.minLogLevel==l.GENERAL&&(e&&(1===arguments.length?console.log(a):console.log.apply(console,arguments)),v("general",a)),d):d},d.debug=function(a){return d.enabled?(m?d._remoteLog(Array.prototype.slice.call(arguments),l[g]):d.minLogLevel.asInt<=l[g].asInt&&(e&&(console.debug?1===arguments.length?console.debug(a):console.debug.apply(console,arguments):1===arguments.length?console.log(a):console.log.apply(console,arguments)),v("debug",a)),d):d},d.info=function(a){return d.enabled?(m?d._remoteLog(Array.prototype.slice.call(arguments),l.INFO):d.minLogLevel.asInt<=l.INFO.asInt&&(e&&(1===arguments.length?console.info(a):console.info.apply(console,arguments)),v("info",a)),d):d},d.warn=function(a){return d.enabled?(m?d._remoteLog(Array.prototype.slice.call(arguments),l.WARN):d.minLogLevel.asInt<=l.WARN.asInt&&(e&&(1===arguments.length?console.warn(a):console.warn.apply(console,arguments)),v("warn",a)),d):d},d.error=function(a){if(d.enabled)return m?d._remoteLog(Array.prototype.slice.call(arguments),l.ERROR):(e&&(1===arguments.length?console.error(a):console.error.apply(console,arguments)),v("error",a)),d},d.assert=function(a,b){return d.enabled&&(a||(v("error",b),m&&d._remoteLog(b,l.ERROR)),e&&console.assert&&console.assert(a,b)),d},d.dir=function(a){return d.enabled&&(m?d._remoteLog(Array.prototype.slice.call(arguments),l.GENERAL):e&&(1===arguments.length?console.dir(a):console.dir.apply(console,arguments))),d},d.clear=function(){return d.enabled&&(m&&d._remoteLog("","clear"),e&&console.clear(),d.output&&(d.output.innerHTML="")),d},d.trace=function(a){return d.enabled&&(m?d._remoteLog(Array.prototype.slice.call(arguments),l.GENERAL):e&&(1===arguments.length?console.trace(a):console.trace.apply(console,arguments))),d},d.group=function(a){return d.enabled&&(m?d._remoteLog(Array.prototype.slice.call(arguments),"group"):e&&console.group&&console.group.apply(console,arguments)),d},d.groupCollapsed=function(a){return d.enabled&&(m?d._remoteLog(Array.prototype.slice.call(arguments),"groupCollapsed"):e&&console.groupCollapsed&&console.groupCollapsed.apply(console,arguments)),d},d.groupEnd=function(){return d.enabled&&(m?d._remoteLog(Array.prototype.slice.call(arguments),"groupEnd"):e&&console.groupEnd&&console.groupEnd()),d};var y={navy:"#001F3F",blue:"#0074D9",aqua:"#7FDBFF",teal:"#39CCCC",olive:"#3D9970",green:"#2ECC40",lime:"#01FF70",yellow:"#FFDC00",orange:"#FF851B",red:"#FF4136",pink:"#F012BE",purple:"#B10DC9",maroon:"#85144B",silver:"#ddd",gray:"#aaa"};for(var z in y)d[z]=f?a(y[z]):d.log;namespace("springroll").Debug=d}(),function(){var a={},b=4,c=[],d=0,e=0,f={HEADER:"color: #FF4136; font-size: 1.2em; text-decoration:underline;",LABEL:"color: #2ECC40;",TYPE:"color: #0074D9;",DESC:"color: #FF851B"},g={INT:"int",NUMBER:"number",STRING:"string",BOOLEAN:"boolean"};a.int=function(b,c){return a.add(b,g.INT,c)},a.boolean=function(b,c){return a.add(b,g.BOOLEAN,c)},a.string=function(b,c){return a.add(b,g.STRING,c)},a.number=function(b,c){return a.add(b,g.NUMBER,c)},a.add=function(b,f,g){return d=Math.max(b.length,d),e=Math.max(f.length,e),c.push({label:b,type:f,desc:g}),a},a.log=function(){var a="\n%cQuery Debug Options:\n%c",g=[f.HEADER,"display:none"];d+=b,e+=b;for(var i,j=h(d+e+b),k=c.length,l=0;l<k;l++)i=c[l],a+="\t%c"+h(d,i.label),a+="%c"+h(e,i.type),i.desc&&(i.desc=i.desc.replace(/(\r\n|\n|\r)/gm,"\n"+j),a+="%c"+i.desc),a+="\n",g.push(f.LABEL,f.TYPE),i.desc&&g.push(f.DESC);console.log.apply(console,[a+"\n"].concat(g))},a.reset=function(){return c.length=[],d=0,e=0,a};var h=function(a,b){if(b)for(;b.length<a;)b+=" ";else for(b=" ";--a;)b+=" ";return b};namespace("springroll").DebugOptions=a}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.Debug"),c=new a;c.setup=function(){this.options.add("debug",!0),this.options.add("minLogLevel",0),this.options.add("framerate"),this._framerate=null,this.options.add("debugRemote",null).respond("debug",function(){return b.enabled}).on("debug",function(a){b.enabled=a}).on("debugRemote",function(a){b.disconnect(),a&&b.connect(a)}).respond("minLogLevel",function(){return b.minLogLevel.asInt}).on("minLogLevel",function(a){b.minLogLevel=b.Levels.valueFromInt(parseInt(a,10)),b.minLogLevel||(b.minLogLevel=b.Levels.GENERAL)})},c.preload=function(a){this.options.asDOMElement("framerate");var b=this.options.framerate,c=this.display;if(!b&&c){var d=c.canvas;b=document.createElement("div"),b.id="framerate",d.parentNode.insertBefore(b,d)}if(b){this._framerate=b,b.innerHTML="FPS: 00.000";var e=0,f=0;this.on("update",function(a){if(e++,(f+=a)>=1e3){var c=1e3/f*e;b.innerHTML="FPS: "+c.toFixed(3),f=0,e=0}}).on("resumed",function(){e=f=0})}a()},c.teardown=function(){b.disconnect()}}();}();